:root {
  --flag-black: #1a1a1a;
  --flag-red: #d50000;
  --flag-gold: #ffcc00;
  --flag-gold-dark: #c69300;
  --flag-gold-soft: #fff5cc;
  --flag-red-soft: #ffe5e5;
  --flag-green: #1b7f3b;
  --flag-green-soft: #e6f6ec;
  --flag-stone-50: #f9f7f2;
  --flag-stone-100: #f1eee7;
  --flag-stone-200: #e8e2d6;
  --flag-stone-300: #d8cdbb;
  --flag-border: #e2d9c4;
  --flag-muted: #5f6165;
  --font-scale: 1;
  --aside-width: 40%;
}

html {
  font-size: 16px;
}

#home-view,
#exam-view {
  font-size: calc(1rem * var(--font-scale));
}

#home-view .text-xs,
#exam-view .text-xs {
  font-size: calc(0.75rem * var(--font-scale));
}

#home-view .text-sm,
#exam-view .text-sm {
  font-size: calc(0.875rem * var(--font-scale));
}

#home-view .text-base,
#exam-view .text-base {
  font-size: calc(1rem * var(--font-scale));
}

#home-view .text-lg,
#exam-view .text-lg {
  font-size: calc(1.125rem * var(--font-scale));
}

#home-view .text-xl,
#exam-view .text-xl {
  font-size: calc(1.25rem * var(--font-scale));
}

#home-view .text-2xl,
#exam-view .text-2xl {
  font-size: calc(1.5rem * var(--font-scale));
}

#home-view .text-3xl,
#exam-view .text-3xl {
  font-size: calc(1.875rem * var(--font-scale));
}

#home-view .text-\[10px\],
#exam-view .text-\[10px\] {
  font-size: calc(10px * var(--font-scale));
}

@media (min-width: 1024px) {
  #exam-grid {
    grid-template-columns: minmax(0, calc(100% - var(--aside-width))) minmax(0, var(--aside-width));
  }
}

#left-panel p {
  text-align: justify;
  text-justify: inter-word;
}

body.theme-body {
  color: var(--flag-black);
  background: linear-gradient(135deg, #ffffff 0%, #fff5cc 45%, #ffe5e5 100%);
}

.flag-glow-top {
  background: radial-gradient(circle at top, rgba(213, 0, 0, 0.18), transparent 60%);
}

.flag-glow-bottom {
  background: radial-gradient(circle at 20% 80%, rgba(255, 204, 0, 0.22), transparent 60%);
}

.grid-overlay {
  background-image: linear-gradient(rgba(26, 26, 26, 0.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(26, 26, 26, 0.05) 1px, transparent 1px);
  background-size: 46px 46px;
  opacity: 0.35;
}

.bg-stone-50 {
  background-color: var(--flag-stone-50) !important;
}

.bg-stone-100 {
  background-color: var(--flag-stone-100) !important;
}

.bg-stone-200 {
  background-color: var(--flag-stone-200) !important;
}

.bg-white {
  background-color: #ffffff !important;
}

.bg-white\/80 {
  background-color: rgba(255, 255, 255, 0.88) !important;
}

.bg-white\/90 {
  background-color: rgba(255, 255, 255, 0.94) !important;
}

.bg-azure {
  background-color: var(--flag-gold) !important;
}

.bg-azure\/10 {
  background-color: var(--flag-gold-soft) !important;
}

.bg-mint\/10 {
  background-color: var(--flag-green-soft) !important;
}

.bg-mint\/20 {
  background-color: var(--flag-green-soft) !important;
}

.bg-rose\/10,
.bg-rose\/15 {
  background-color: var(--flag-red-soft) !important;
}

.border-stone-200 {
  border-color: var(--flag-stone-200) !important;
}

.border-stone-300 {
  border-color: var(--flag-stone-300) !important;
}

.border-azure\/30,
.border-azure\/40,
.border-azure\/50,
.border-azure\/60 {
  border-color: var(--flag-gold-dark) !important;
}

.border-mint\/30,
.border-mint\/40,
.border-mint\/50,
.border-mint\/60 {
  border-color: var(--flag-green) !important;
}

.border-rose\/30,
.border-rose\/40,
.border-rose\/50 {
  border-color: var(--flag-red) !important;
}

.border-black\/20 {
  border-color: var(--flag-border) !important;
}

.text-azure {
  color: var(--flag-gold-dark) !important;
}

.text-mint {
  color: var(--flag-green) !important;
}

.text-rose {
  color: var(--flag-red) !important;
}

.text-white {
  color: var(--flag-black) !important;
}

.ring-azure\/20 {
  --tw-ring-color: rgba(255, 204, 0, 0.35) !important;
}

.ring-azure\/30 {
  --tw-ring-color: rgba(255, 204, 0, 0.5) !important;
}

.shadow-panel {
  box-shadow: 0 24px 60px rgba(26, 26, 26, 0.12) !important;
}

.shadow-lg {
  box-shadow: 0 16px 28px rgba(26, 26, 26, 0.18) !important;
}

* {
  scrollbar-width: thin;
  scrollbar-color: rgba(26, 26, 26, 0.2) transparent;
}
*::-webkit-scrollbar {
  width: 8px;
}
*::-webkit-scrollbar-track {
  background: transparent;
}
*::-webkit-scrollbar-thumb {
  background: rgba(26, 26, 26, 0.18);
  border-radius: 999px;
}

/* Mobile aside animations */
#right-panel {
  transition: transform 220ms cubic-bezier(.2,.8,.2,1), opacity 200ms linear;
  will-change: transform, opacity;
}

@media (max-width: 767px) {
  #right-panel.hidden {
    transform: translateX(100%);
    opacity: 0;
  }
  #right-panel.fixed {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Header responsive tweaks for all pages on small screens */
@media (max-width: 767px) {
  header {
    height: 56px;
    padding-left: 8px !important;
    padding-right: 8px !important;
  }
  #header-left {
    gap: 8px !important;
  }
  #header-left img#brand-logo,
  img#brand-logo {
    display: none !important;
  }
  #return-label {
    display: none;
  }
  #header-divider {
    display: none;
  }
  #header-title h1#theme-title,
  #theme-title {
    font-size: 0.9rem;
  }
  #level-pill {
    display: none;
  }
  /* Part cards on mobile: display in single row with horizontal scroll */
  #part-cards {
    flex-wrap: nowrap !important;
    gap: 6px !important;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
  }
  #part-cards button {
    font-size: 7px;
    padding: 6px 8px;
    min-width: 75px;
    height: auto;
    flex-shrink: 0;
  }
}
